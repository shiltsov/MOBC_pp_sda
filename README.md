# Телеграм-бот инференса ML-модели

### Автор: Шильцов Дмитрий (ВШЭ МОВС [a23]) @DDmmiittrryy
### Бот: mobc_pp_sda

## 18.02.24  - добавлено тестирование + все зависимости сдеалны через poetry + настроен прекоммит (black+isort)

В папке tests сделаны utit-тексты для всех хендлеров бота (вклюучая инференс - файл handles/utils.py)
для тестов использовался форк библиотеки aiogram-tests умеющий частично работать в версией aiogram-3.3 
(git = "https://github.com/Like6po/aiogram_tests.git") 

результаты прохождения юнит-тестов (`$pytest --cov=handlers --cov-report=html tests/`)

![изображение](https://github.com/shiltsov/MOBC_pp_sda/assets/54742337/0d5d6db3-196d-4e08-bdb4-fb39b5a2636e)

Проверка flake8

![изображение](https://github.com/shiltsov/MOBC_pp_sda/assets/54742337/6dc635ac-2190-4b31-a9bf-9852cb48eeb3)


## Постановка задачи

Есть 2 модели машинного обучения "умеющие" предсказывать авторство по фрагменту текста. Предсказание -
отнесение к одному из 10 писателей (мягкая классификация). Сами модели вне данной задачи, важно что они есть и работают.
Модели условно называются `BOW` и `TFIDF`. Задача - написать телеграм-бота реализующего инференс этих моделей максимально задействовав 
возможности асинхронной библиотеки (aiogram 3.3 в моем случае)

## Реализация
Задача реализована через конечные автоматы (FSM для состояний бота).


### Определить авторство
сначала выбираем модель для предсказания
далее либо копипастим текст в поле ввода либо загружаем текстовый файл (utf-8)
по итогам появляется предикт и бот возвращается в начальное состояние

![inference](https://github.com/shiltsov/MOBC_pp_sda/assets/54742337/1f6e73a2-5e87-49e1-a9b6-a39a59e4b263)

### О писателях
выбираем писателя, получаем фото писателя и кусочек текста. возвращаемся в исходное состояние.
красиво но бесполезно

![authors](https://github.com/shiltsov/MOBC_pp_sda/assets/54742337/e89f787a-2d89-41c2-89ae-1908db6afdf8)


### Голосовать
Голосуем. Смотрим как голосовали другие. возвращаемся в исходное состояние. 

![vote](https://github.com/shiltsov/MOBC_pp_sda/assets/54742337/df893e70-0ba9-49e3-a160-6e86cbc9adda)


### О проекте
краткая информация о проекте
